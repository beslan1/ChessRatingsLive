<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Рейтинг шахматистов КБР - Live</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Локальные стили -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body class="min-h-screen bg-gray-100 relative">
    <!-- Шахматный фон -->
    <div class="chess-board-bg"></div>

    <!-- Контейнер -->
    <div class="container mx-auto p-4">
        <!-- Шапка с баннером -->
        <div class="flex flex-col items-center mb-6 max-w-7xl mx-auto">
            <img src="{{ url_for('static', filename='images/mainbanner.png') }}" alt="Рейтинг шахматистов КБР" class="header-banner">
        </div>

        <!-- Фильтры и поиск -->
        <div class="flex flex-col lg:flex-row lg:space-x-4 mb-6 max-w-7xl mx-auto">
            <div class="flex space-x-2 mb-4 lg:mb-0">
                <button id="all-players" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Все игроки</button>
                <button id="women" class="px-4 py-2 bg-gray-200 text-gray-900 rounded-lg hover:bg-gray-400">Женщины</button>
                <button id="children" class="px-4 py-2 bg-gray-200 text-gray-900 rounded-lg hover:bg-gray-400">Дети</button>
                <button id="top100" class="px-4 py-2 bg-gray-200 text-gray-900 rounded-lg hover:bg-gray-400">Топ 100</button>
            </div>
            <div class="flex flex-1 space-x-2 justify-between">
                <div class="relative w-full sm:w-[calc(33.333%-0.67rem)] custom-search-width">
                    <input id="search" type="text" placeholder="Поиск по имени..." class="w-full px-4 py-2 pl-10 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 box-border">
                    <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                </div>
                <div class="relative w-full sm:w-[calc(33.333%-0.67rem)] custom-search-width">
                    <input id="rating-search" type="number" placeholder="Мин. рейтинг" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 box-border">
                </div>
            </div>
        </div>

        <!-- Статистика -->
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6 max-w-7xl mx-auto">
            <div class="bg-white p-4 rounded-lg shadow">
                <p class="text-sm text-gray-500">Всего игроков</p>
                <p id="total-players" class="text-lg font-bold text-gray-800">0</p>
            </div>
            <div class="bg-white p-4 rounded-lg shadow">
                <p class="text-sm text-gray-500">Лучший прогресс</p>
                <p id="best-progress" class="text-lg font-bold text-green-600">+0</p>
            </div>
            <div class="bg-white p-4 rounded-lg shadow">
                <p class="text-sm text-gray-500">Топ рейтинг</p>
                <p id="top-rating" class="text-lg font-bold text-blue-600">—</p>
            </div>
        </div>

        <!-- Основной контент -->
        <div class="flex flex-col sm:flex-row sm:space-x-4 max-w-7xl mx-auto">
            <!-- Таблица -->
            <div class="w-full max-w-[848px] overflow-x-auto table-container">
                <div class="bg-white rounded-xl shadow-lg">
                    <table class="min-w-full divide-y divide-gray-200" aria-label="Рейтинг шахматистов КБР">
                        <thead>
                            <tr>
                                <th colspan="6" class="py-3 px-2 bg-green-700">
                                    <div class="flex w-full items-center gap-2 justify-around overflow-x-auto rating-filter-container">
                                        <!-- ФШР -->
                                        <span class="text-base font-bold text-white min-w-[60px] text-center rating-filter-label">ФШР:</span>
                                        <button id="filter-fshr-classic" class="px-2 py-1 text-base bg-gray-200 rounded text-gray-700 hover:bg-gray-300 rating-filter-btn min-w-[80px] text-center">Классика</button>
                                        <button id="filter-fshr-rapid" class="px-2 py-1 text-base bg-gray-200 rounded text-gray-700 hover:bg-gray-300 rating-filter-btn min-w-[80px] text-center">Быстрые</button>
                                        <button id="filter-fshr-blitz" class="px-2 py-1 text-base bg-gray-200 rounded text-gray-700 hover:bg-gray-300 rating-filter-btn min-w-[80px] text-center">Блиц</button>
                                        <!-- FIDE -->
                                        <span class="text-base font-bold text-white min-w-[60px] text-center rating-filter-label">FIDE:</span>
                                        <button id="filter-fide-classic" class="px-2 py-1 text-base bg-gray-300 rounded text-gray-700 hover:bg-gray-400 rating-filter-btn min-w-[80px] text-center">Standard</button>
                                        <button id="filter-fide-rapid" class="px-2 py-1 text-base bg-gray-300 rounded text-gray-700 hover:bg-gray-400 rating-filter-btn min-w-[80px] text-center">Rapid</button>
                                        <button id="filter-fide-blitz" class="px-2 py-1 text-base bg-gray-300 rounded text-gray-700 hover:bg-gray-400 rating-filter-btn min-w-[80px] text-center">Blitz</button>
                                    </div>
                                </th>
                            </tr>
                            <tr class="bg-amber-300 text-black-500 uppercase text-base leading-normal">
                                <th class="py-3 px-2 text-center cursor-pointer" onclick="sortTable('index')">#</th>
                                <th class="py-3 px-2 text-center cursor-pointer" onclick="sortTable('name')">ФИО</th>
                                <th class="py-3 px-2 text-center cursor-pointer" onclick="sortTable('title')">ЗВАНИЕ</th>
                                <th class="py-3 px-2 text-center cursor-pointer" onclick="sortTable('rating')">Рейтинг</th>
                                <th class="py-3 px-2 text-center cursor-pointer" onclick="sortTable('change')">+/-</th>
                                <th class="py-3 px-2 text-center cursor-pointer" onclick="sortTable('age')">Возраст</th>
                            </tr>
                        </thead>
                        <tbody id="players-table">
                            <!-- Данные будут добавлены через JavaScript -->
                        </tbody>
                    </table>
                </div>
                <!-- Пагинация -->
                <div class="mt-4 flex items-center justify-between">
                    <div class="text-sm text-gray-500">
                        Показано с <span id="shown-from">1</span> по <span id="shown-to">20</span> из <span id="total-count">0</span>
                    </div>
                    <div class="flex space-x-1" id="pagination">
                        <!-- Пагинация будет добавлена через JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Карточка игрока и футер -->
            <div class="w-full sm:w-1/3 mt-6 sm:mt-0 player-card-container flex flex-col">
                <div id="player-card" class="player-card bg-white p-6 rounded-xl shadow-lg">
                    <div class="mb-4">
                        <h2 id="player-name" class="text-xl font-bold text-gray-800">Выберите игрока</h2>
                    </div>
                    <div class="space-y-3">
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-500">Звание:</span>
                            <span id="player-title" class="text-sm font-bold text-gray-800">—</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-500">Год рождения:</span>
                            <span id="player-birth-year" class="text-sm font-bold text-gray-800">—</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-500">Пол:</span>
                            <span id="player-gender" class="text-sm font-bold text-gray-800">—</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-500">ФШР Классика:</span>
                            <span id="player-fshr-classic" class="text-sm font-bold text-gray-800">—</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-500">ФШР Быстрые:</span>
                            <span id="player-fshr-rapid" class="text-sm font-bold text-gray-800">—</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-500">ФШР Блиц:</span>
                            <span id="player-fshr-blitz" class="text-sm font-bold text-gray-800">—</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-500">FIDE Standard:</span>
                            <span id="player-fide-classic" class="text-sm font-bold text-gray-800">—</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-500">FIDE Rapid:</span>
                            <span id="player-fide-rapid" class="text-sm font-bold text-gray-800">—</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-500">FIDE Blitz:</span>
                            <span id="player-fide-blitz" class="text-sm font-bold text-gray-800">—</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-500">Турниров сыграно:</span>
                            <span id="player-tournaments" class="text-sm font-bold text-gray-800">—</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-500">Лучший результат:</span>
                            <span id="player-best-result" class="text-sm font-bold text-gray-800">—</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-500">Последние турниры:</span>
                            <span id="player-last-tournaments" class="text-sm font-bold text-gray-800">—</span>
                        </div>
                    </div>
                </div>
                <!-- Футер -->
                <footer class="mt-4 bg-white p-6 rounded-xl shadow-lg footer-container">
                    <div class="text-center">
                        <div class="flex flex-col gap-3 items-start">
                            <a href="https://www.youtube.com/@HARD-CHESS" target="_blank" class="flex items-center gap-2 text-red-600 hover:text-blue-600">
                                <i class="fab fa-youtube text-lg"></i>
                                <span class="text-sm">YouTube: HARD-CHESS</span>
                            </a>
                            <a href="https://vk.com/public134705843" target="_blank" class="flex items-center gap-2 text-blue-700 hover:text-blue-600">
                                <i class="fab fa-vk text-lg"></i>
                                <span class="text-sm">VK: Chess KBR</span>
                            </a>
                            <a href="https://lichess.org/team/caucasians" target="_blank" class="flex items-center gap-2 text-gray-600 hover:text-blue-600">
                                <img src="{{ url_for('static', filename='images/lichess-icon.svg') }}" alt="Lichess" class="w-5 h-5">
                                <span class="text-sm">Lichess: Caucasians</span>
                            </a>
                            <a href="http://kbr-chess.ru/" target="_blank" class="flex items-center gap-2 text-gray-600 hover:text-blue-600">
                                <i class="fas fa-link text-lg"></i>
                                <span class="text-sm">KBR Chess</span>
                            </a>
                            <a href="https://lichess.org/@/s1mple_11" target="_blank" class="flex items-center gap-2 text-blue-500 hover:text-blue-600">
                                <i class="fab fa-telegram-plane text-lg"></i>
                                <span class="text-sm">Lichess: s1mple_11</span>
                            </a>
                        </div>
                        <h3 class="text-base font-bold text-gray-800 mt-4 font-montserrat">Рейтинг шахматистов КБР</h3>
                        <p class="text-sm text-gray-600">© 2025</p>
                    </div>
                </footer>
            </div>
        </div>
    </div>

    <!-- Подключение JavaScript -->
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>